<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>【Vue前端框架】Vue3.0全套教程 - TyNote</title><meta name="Description" content="你我一场唤不醒的梦……"><meta property="og:url" content="https://Wangty654.github.io/vue3/">
  <meta property="og:site_name" content="TyNote">
  <meta property="og:title" content="【Vue前端框架】Vue3.0全套教程">
  <meta property="og:description" content="时隔84天，本章节基于vue2的基础上，记录vue3的所涉及的一些语法和使用场景">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-14T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-14T00:00:00+00:00">
    <meta property="article:tag" content="Vue">
    <meta property="og:image" content="https://Wangty654.github.io/images/avatar.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://Wangty654.github.io/images/avatar.png">
  <meta name="twitter:title" content="【Vue前端框架】Vue3.0全套教程">
  <meta name="twitter:description" content="时隔84天，本章节基于vue2的基础上，记录vue3的所涉及的一些语法和使用场景">
<meta name="application-name" content="TyNote">
<meta name="apple-mobile-web-app-title" content="TyNote"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="msapplication-TileColor" href="/favicon-16x16.png" color="#da532c"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Wangty654.github.io/vue3/" /><link rel="prev" href="https://Wangty654.github.io/text36/" /><link rel="next" href="https://Wangty654.github.io/text39/" /><link rel="stylesheet" href="/css/style.min.cafd7a15685d3295cb0c60c3cf7c0cde0632ba4dd2c8b6c34b35bf00ee9e8a08.css" integrity="sha256-yv16FWhdMpXLDGDDz3wM3gYyuk3SyLbDSzW/AO6eigg="><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "【Vue前端框架】Vue3.0全套教程",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Wangty654.github.io\/vue3\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/Wangty654.github.io\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "vue","wordcount":  14366 ,
        "url": "https:\/\/Wangty654.github.io\/vue3\/","datePublished": "2024-11-14T00:00:00+00:00","dateModified": "2024-11-14T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "TyNote","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/Wangty654.github.io\/images\/avatar.png",
                    "width":  528 ,
                    "height":  528 
                }},"author": {
                "@type": "Person",
                "name": "wangty"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="normal" data-header-mobile="normal"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="TyNote"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/avatarico.png"
        data-srcset="/images/avatarico.png, /images/avatarico.png 1.5x, /images/avatarico.png 2x"
        data-sizes="auto"
        alt="/images/avatarico.png"
        title="/images/avatarico.png" />TyNote</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"><i class='fa fa-home' aria-hidden='true'></i> 首页 </a><a class="menu-item" href="/posts/"><i class='fa fa-quote-left' aria-hidden='true'></i> 所有文章 </a><a class="menu-item" href="/tags/"><i class='fa fa-tags' aria-hidden='true'></i> 标签 </a><a class="menu-item" href="/categories/"><i class='fa fa-list' aria-hidden='true'></i> 分类 </a><a class="menu-item" href="/about/"><i class='fa fa-window-restore' aria-hidden='true'></i> 关于 </a><a class="menu-item" href="/friend/" title="Friend"><i class='fa fa-paper-plane' aria-hidden='true'></i> 友链 </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="TyNote"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/avatarico.png"
        data-srcset="/images/avatarico.png, /images/avatarico.png 1.5x, /images/avatarico.png 2x"
        data-sizes="auto"
        alt="/images/avatarico.png"
        title="/images/avatarico.png" />TyNote</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/" title=""><i class='fa fa-home' aria-hidden='true'></i>首页</a><a class="menu-item" href="/posts/" title=""><i class='fa fa-quote-left' aria-hidden='true'></i>所有文章</a><a class="menu-item" href="/tags/" title=""><i class='fa fa-tags' aria-hidden='true'></i>标签</a><a class="menu-item" href="/categories/" title=""><i class='fa fa-list' aria-hidden='true'></i>分类</a><a class="menu-item" href="/about/" title=""><i class='fa fa-window-restore' aria-hidden='true'></i>关于</a><a class="menu-item" href="/friend/" title="Friend"><i class='fa fa-paper-plane' aria-hidden='true'></i>友链</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto" >

            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">【Vue前端框架】Vue3.0全套教程</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wangty</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E5%89%8D%E7%AB%AF/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>前端</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-11-14">2024-11-14</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 14366 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 29 分钟&nbsp;<span id="/vue3/" class="leancloud_visitors" data-flag-title="【Vue前端框架】Vue3.0全套教程">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;







<span id="busuanzi_container_value_page_pv"><i class="far fa-eye fa-fw"></i>
                
                <span id="busuanzi_value_page_pv"></span>&nbsp;次阅读</span>



</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span></span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#vue3快速上手">Vue3快速上手</a>
          <ul>
            <li><a href="#1vue3简介">1.Vue3简介</a></li>
            <li><a href="#2vue3带来了什么">2.Vue3带来了什么</a></li>
          </ul>
        </li>
        <li><a href="#一创建vue30工程">一、创建Vue3.0工程</a>
          <ul>
            <li><a href="#1使用-vue-cli-创建">1.使用 vue-cli 创建</a></li>
            <li><a href="#2使用-vite-创建">2.使用 vite 创建</a></li>
            <li><a href="#3分析工程结构">3.分析工程结构</a>
              <ul>
                <li><a href="#入口文件mainjs">入口文件main.js</a></li>
                <li><a href="#领头组件appvue">领头组件App.vue</a></li>
              </ul>
            </li>
            <li><a href="#4安装开发者工具">4.安装开发者工具</a></li>
          </ul>
        </li>
        <li><a href="#二常用-composition-api">二、常用 Composition API</a>
          <ul>
            <li><a href="#1setup配置项">1.setup配置项</a></li>
            <li><a href="#2ref函数">2.ref函数</a>
              <ul>
                <li><a href="#ref函数-基本类型数据申明">ref函数-基本类型数据申明</a></li>
                <li><a href="#ref函数-对象类型数据申明">ref函数-对象类型数据申明</a></li>
              </ul>
            </li>
            <li><a href="#3reactive函数">3.reactive函数</a></li>
            <li><a href="#4vue30中的响应式原理">4.Vue3.0中的响应式原理</a>
              <ul>
                <li><a href="#vue2x的响应式">vue2.x的响应式</a></li>
                <li><a href="#vue30的响应式">vue3.0的响应式</a>
                  <ul>
                    <li><a href="#vue2x的响应式模拟">vue2.x的响应式模拟</a></li>
                    <li><a href="#vue30的响应式模拟">vue3.0的响应式模拟</a></li>
                    <li><a href="#vue30的响应式真实原理">vue3.0的响应式真实原理</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#5reactive对比ref">5.reactive对比ref</a></li>
            <li><a href="#6setup的两个注意点">6.setup的两个注意点</a></li>
            <li><a href="#7计算属性与监视">7.计算属性与监视</a>
              <ul>
                <li><a href="#1computed函数">1.computed函数</a></li>
                <li><a href="#2watch函数">2.watch函数</a></li>
                <li><a href="#3watcheffect函数">3.watchEffect函数</a></li>
              </ul>
            </li>
            <li><a href="#8生命周期">8.生命周期</a></li>
            <li><a href="#9自定义hook函数">9.自定义hook函数</a></li>
            <li><a href="#10torefs">10.toRefs</a></li>
          </ul>
        </li>
        <li><a href="#三其它-composition-api">三、其它 Composition API</a>
          <ul>
            <li><a href="#1shallowreactive-与-shallowref">1.shallowReactive 与 shallowRef</a></li>
            <li><a href="#2readonly-与-shallowreadonly">2.readonly 与 shallowReadonly</a></li>
            <li><a href="#3toraw-与-markraw">3.toRaw 与 markRaw</a></li>
            <li><a href="#4customref">4.customRef</a></li>
            <li><a href="#5provide-与-inject">5.provide 与 inject</a></li>
            <li><a href="#6响应式数据的判断">6.响应式数据的判断</a></li>
          </ul>
        </li>
        <li><a href="#四composition-api-的优势">四、Composition API 的优势</a>
          <ul>
            <li><a href="#1options-api-存在的问题">1.Options API 存在的问题</a></li>
            <li><a href="#2composition-apl-的优势">2.Composition APl 的优势</a></li>
          </ul>
        </li>
        <li><a href="#五新的组件">五、新的组件</a>
          <ul>
            <li><a href="#1fragment">1.Fragment</a></li>
            <li><a href="#2teleport">2.Teleport</a></li>
            <li><a href="#3suspense">3.Suspense</a></li>
          </ul>
        </li>
        <li><a href="#六其他">六、其他</a>
          <ul>
            <li><a href="#1全局api的转移">1.全局API的转移</a></li>
            <li><a href="#2其他改变">2.其他改变</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div>



        <div class="content" id="content"><h2 id="vue3快速上手">Vue3快速上手</h2>
<h3 id="1vue3简介">1.Vue3简介</h3>
<ul>
<li>2020年9月18日，Vue.js发布3.0版本，代号:One Piece(海贼王)</li>
<li>耗时2年多、2600+次提交、30+个RFC（请求修改意见稿）、600+次PR、99位贡献者</li>
<li>github上的tags（各个开源版本）地址:https://github.com/vuejs/vue-next/releases/tag/v3.0.0</li>
</ul>
<h3 id="2vue3带来了什么">2.Vue3带来了什么</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241114153125276.png"
        data-srcset="./images/image-20241114153125276.png, ./images/image-20241114153125276.png 1.5x, ./images/image-20241114153125276.png 2x"
        data-sizes="auto"
        alt="./images/image-20241114153125276.png"
        title="image-20241114153125276" /></p>
<h2 id="一创建vue30工程">一、创建Vue3.0工程</h2>
<h3 id="1使用-vue-cli-创建">1.使用 vue-cli 创建</h3>
<p>官方文档：https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">## 查看@vue/c1i版本，确保@vue/cli版本在4.5.0以上 ,vue -V查看本机@vue/c1i版本</span>
</span></span><span class="line"><span class="cl">vue --version
</span></span><span class="line"><span class="cl"><span class="c1">## 安装或者升级你的@vue/cli --不满足版本要求就自行这一步重新安装</span>
</span></span><span class="line"><span class="cl">npm install -g @vue/cli
</span></span><span class="line"><span class="cl"><span class="c1">## 创建</span>
</span></span><span class="line"><span class="cl">vue create vue_test
</span></span><span class="line"><span class="cl"><span class="c1">## 启动</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> vue_test
</span></span><span class="line"><span class="cl">npm run serve
</span></span></code></pre></td></tr></table>
</div>
</div><p>​</p>
<h3 id="2使用-vite-创建">2.使用 vite 创建</h3>
<p>官方文档：https://v3.cn.vuejs.org/guide/installation.html#vite
vite官网：https://vitejs.cn</p>
<ul>
<li>
<p>什么是vite? —— 新一代前端构建工具（作用对比webpack）。</p>
</li>
<li>
<p>优势如下：</p>
<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载(HMR)</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
</li>
<li>
<p>传统构建 与 vite构建对比图（这两张图来自于vite官网<a href="https://vitejs.cn/vite5-cn/guide/why.html" target="_blank" rel="noopener noreffer ">位置</a>）</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241115101851729.png"
        data-srcset="./images/image-20241115101851729.png, ./images/image-20241115101851729.png 1.5x, ./images/image-20241115101851729.png 2x"
        data-sizes="auto"
        alt="./images/image-20241115101851729.png"
        title="image-20241115101851729" /></p>
<p><code>npm run serve</code>这种的<code>webpack</code><strong>传统工作模式</strong>：先是从一个<code>entry</code>，先看路由，再看模块，再进行打包，最后告知8080服务器启动好了。【主要等待时间在<code>Bundle</code>打包的位置】</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241115101905338.png"
        data-srcset="./images/image-20241115101905338.png, ./images/image-20241115101905338.png 1.5x, ./images/image-20241115101905338.png 2x"
        data-sizes="auto"
        alt="./images/image-20241115101905338.png"
        title="image-20241115101905338" /></p>
<p><strong>vite构建工作模式</strong>：先告知8080服务器启动准备完成，根据你发起的请求，找到对应的<code>entry</code>并且解析该模块对应的路由和组件信息展示。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">## 创建工程</span>
</span></span><span class="line"><span class="cl">npm init vite-app &lt;project-name&gt;
</span></span><span class="line"><span class="cl"><span class="c1">##进入工程目录</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> &lt;project-name&gt;
</span></span><span class="line"><span class="cl"><span class="c1">##安装依赖</span>
</span></span><span class="line"><span class="cl">npm insta1l
</span></span><span class="line"><span class="cl"><span class="c1">## 运行</span>
</span></span><span class="line"><span class="cl">npm run dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们将两种构建模式放一起同时运行，很明显vite方式的要比传统方式快很多。</p>
<p>期间，传统方式等待的这段时间，就是在打包。</p>
<div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>注意<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">传统运行命令是<code>npm run serve</code>，vite运行命令式<code>npm run dev</code>。现在vite模式还没有大规模应用，所以我们此文档后面的演示还是使用基于传统模式的运行方式。</div>
        </div>
    </div>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241115103347223.png"
        data-srcset="./images/image-20241115103347223.png, ./images/image-20241115103347223.png 1.5x, ./images/image-20241115103347223.png 2x"
        data-sizes="auto"
        alt="./images/image-20241115103347223.png"
        title="image-20241115103347223" /></p>
</li>
</ul>
<h3 id="3分析工程结构">3.分析工程结构</h3>
<div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>This is a tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>分析工程结构，需要：使用Vue3搭建好后最原始的初始化工程</p>
<p>关闭框架自动的校验提示，同样使用Vue2中根目录下的<code>vue.config.js</code>文件。拷贝放入根目录即可。</p>
</div>
        </div>
    </div>
<h4 id="入口文件mainjs">入口文件main.js</h4>
<p>首先分析入口文件，文件路径为<code>工程项目包/src/main.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//引入的不再是Vue构造函数了，引入的是一个名为createApp的工厂函数
</span></span></span><span class="line"><span class="cl"><span class="c1">//Vue构造函数：需要使用new关键字进行引用
</span></span></span><span class="line"><span class="cl"><span class="c1">//工厂函数：不需要使用new关键字，可以直接调用，如：createApp()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">createApp</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue‘
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">createApp(App).mount(&#39;</span><span class="err">#</span><span class="nx">app</span><span class="err">&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们对这一句代码<code>createApp(App).mount('#app')</code>，进行拆解分析：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//创建应用实例对象，类似于vm，但app比vm更&#34;轻&#34;，没有那么多的属性和方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span> <span class="c1">//挂载mount。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//对应挂载mount，有unmount卸载.
</span></span></span><span class="line"><span class="cl"><span class="c1">//使用定时器，1秒钟后卸载app组件，整体页面消失
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">setTimeout</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">app</span><span class="p">.</span><span class="nx">unmount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span><span class="mi">1000</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>对比vue2中写法，可以发现结构其实是相似的：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Vue</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">render</span><span class="o">:</span><span class="nx">h</span><span class="p">=&gt;</span><span class="nx">h</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">vm</span><span class="p">.</span><span class="nx">$mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>特别注意<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>在Vue3的项目入口文件中使用Vue2中的写法是不可以的。我们可以清晰的看见报错信息：</p>
<p>翻译过来为：不存在的对象，不能进行实例化。</p>
<img src="./images/image-20241115113027263.png" alt="image-20241115113027263" style="zoom:67%;" />
<p>我们打印Vue实例对象，我们发现并没有成功引入进来。</p>
<img src="./images/image-20241115113128232.png" alt="image-20241115113128232" style="zoom:67%;" />
<p>所以使用new实例化对象的Vue2写法在Vue3项目中并不可行。</p>
</div>
        </div>
    </div>
<h4 id="领头组件appvue">领头组件App.vue</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">Vue3组件中的模板结构</span><span class="err">，</span><span class="nx">可以不使用div根标签包裹</span><span class="err">，</span><span class="nx">如果写</span><span class="err">，</span><span class="nx">也不会报错</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;Vue logo&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./assets/logo.png&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">HelloWorld</span> <span class="na">msg</span><span class="o">=</span><span class="s">&#34;Welcome to Your Vue.js App&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">正常引入组件</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">HelloWorld</span> <span class="nx">from</span> <span class="s1">&#39;./components/HelloWorld.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">components</span><span class="o">:</span><span class="p">{</span><span class="nx">HelloWorld</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">组件样式</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">.....</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="4安装开发者工具">4.安装开发者工具</h3>
<p>Vue2篇幅中，安装在浏览器里的Vue开发者工具是不支持Vue3的。</p>
<p>由此，我们需要安装Vue3专用的开发者工具。</p>
<p>同样，也有两种安装方式：</p>
<ol>
<li>
<p>**在线安装：**直接在chrome网上应用商店，搜索<code>vue</code>，选择图标带脚标的，进行添加安装</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118093957268.png"
        data-srcset="./images/image-20241118093957268.png, ./images/image-20241118093957268.png 1.5x, ./images/image-20241118093957268.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118093957268.png"
        title="image-20241118093957268" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118094149410.png"
        data-srcset="./images/image-20241118094149410.png, ./images/image-20241118094149410.png 1.5x, ./images/image-20241118094149410.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118094149410.png"
        title="image-20241118094149410" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118094226873.png"
        data-srcset="./images/image-20241118094226873.png, ./images/image-20241118094226873.png 1.5x, ./images/image-20241118094226873.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118094226873.png"
        title="image-20241118094226873" /></p>
</li>
<li>
<p>**离线安装：**Vue开发者工具安装包，拖入拓展程序页面，点击添加，添加后启用。</p>
<img src="./images/image-20241118094652551.png" alt="image-20241118094652551" style="zoom:67%;" />
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118094716183.png"
        data-srcset="./images/image-20241118094716183.png, ./images/image-20241118094716183.png 1.5x, ./images/image-20241118094716183.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118094716183.png"
        title="image-20241118094716183" /></p>
</li>
<li>
<p>如果扩展程序同时添加了Vue2以及Vue3的开发者工具，则需要禁用一个，启用一个。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118094843546.png"
        data-srcset="./images/image-20241118094843546.png, ./images/image-20241118094843546.png 1.5x, ./images/image-20241118094843546.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118094843546.png"
        title="image-20241118094843546" /></p>
</li>
</ol>
<h2 id="二常用-composition-api">二、常用 Composition API</h2>
<p>Composition API 我们也称<code>组合式API</code></p>
<p>官方文档: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener noreffer ">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>
<h3 id="1setup配置项">1.setup配置项</h3>
<ol>
<li>
<p>理解：Vue3.0中一个新的配置项，值为一个函数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//计算属性，监视属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//生命周期等钩子函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>组件中所用到的：数据、方法等等，均要配置在setup中。</p>
</li>
<li>
<p>setup函数的两种返回值:</p>
<p>1.若返回一个对象，则对象中的属性、方法,在模板中均可以直接使用。</p>
<p>2.若返回一个渲染函数：则可以自定义渲染内容。</p>
</li>
<li>
<p>简单示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span> <span class="nx">Vue3</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">直接使用setup的返回中暴露的数据和方法</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="err">：</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="err">：</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;sayHello&#34;</span><span class="p">&gt;</span><span class="na">说你好</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!-</span><span class="nt">-返回一个对象</span><span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//此处简单示例只用于测试setup工作，暂不考虑处理响应式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>  <span class="c1">//不用const说明，以后这些数据有可能发生变化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">alert</span><span class="p">(</span><span class="sb">`我叫</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">,我</span><span class="si">${</span><span class="nx">age</span><span class="si">}</span><span class="sb">岁了，你好！`</span><span class="p">)</span> <span class="c1">//使用``模版字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//setup返回一个对象，将所有数据和方法暴露出去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="nx">name</span><span class="p">,</span> <span class="c1">//当key-value形式，写为 name:name时，可以触发简写形式name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="nx">age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="nx">sayHello</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">不论此模版处写什么</span><span class="err">，</span><span class="nx">都不进行编译</span><span class="err">，</span><span class="nx">只读取返回的渲染函数中的内容</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span> <span class="nx">Vue3</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">返回一个渲染函数</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//手动引用h函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">import</span> <span class="p">{</span><span class="nx">h</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">alert</span><span class="p">(</span><span class="sb">`我叫</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">,我</span><span class="si">${</span><span class="nx">age</span><span class="si">}</span><span class="sb">岁了，你好！`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//setup返回一个渲染函数【这种写法不常用，但可做了解】
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//在Vue2中，有个render配置项
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//只要写render，Vue就帮你传入一个h，并调用，这个h就是渲染函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//Vue3中，需要手动引入这个h函数，才能调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//调用方式和Vue2中一样，传入两个参数:h(&#39;想要放入页面的元素&#39;,&#39;该元素对应的文字&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//例如：h(&#39;h1&#39;,&#39;你好&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//将h函数的调用返回值暴露返回给setup的return。return h(&#39;h1&#39;,&#39;你好&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//即整体写做   return ()=&gt;{return h(&#39;h1&#39;,&#39;你好&#39;)}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//简写为  return ()=&gt; h(&#39;h1&#39;,&#39;你好&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="p">()=&gt;</span> <span class="nx">h</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">,</span><span class="s1">&#39;你好&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Vue3是可以向下兼容Vue2写法的，他们可以同时存在和使用，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">Vue3所配置的数据及方法</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="err">：</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;sayHello&#34;</span><span class="p">&gt;</span><span class="na">说你好</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!-</span><span class="nt">-Vue2所配置的数据及方法</span><span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="err">：</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;sayAge&#34;</span><span class="p">&gt;</span><span class="na">说你好</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!-</span><span class="nt">-返回一个对象</span><span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//-----------Vue2语法------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="nx">sex</span><span class="o">:</span><span class="s1">&#39;男&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="err">：</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        	<span class="nx">sayAge</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="sb">`22222222`</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//-----------Vue3语法------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="sb">`11111111`</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span><span class="nx">sayHello</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>注意点:</p>
<ol>
<li>
<p>尽量不要与Vue2.x配置混用</p>
<ul>
<li>
<p>Vue2.x配置(data、methos、computed..)中可以访问到setup中的属性、方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">Vue2中访问Vue3的setup配置中的数据</span><span class="err">、</span><span class="nx">方法</span><span class="err">：</span><span class="nx">均能访问成功</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="nx">sex</span><span class="o">:</span><span class="s1">&#39;男&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="err">：</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sex</span><span class="p">)</span>  <span class="c1">//男
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="c1">//张三
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">)</span> <span class="c1">//function(..)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//-----------Vue3语法------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="sb">`11111111`</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span><span class="nx">sayHello</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>但在setup中不能访问到Vue2.x配置(data、methos、computed&hellip;)。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">Vue3的setup配置中访问Vue2的数据</span><span class="err">、</span><span class="nx">方法</span><span class="err">：</span><span class="nx">均不能访问成功</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="nx">sex</span><span class="o">:</span><span class="s1">&#39;男&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="err">：</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        	<span class="nx">sayAge</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="sb">`22222222`</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">function</span> <span class="nx">sayHello</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="sb">`11111111`</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span> 
</span></span><span class="line"><span class="cl">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sex</span><span class="p">)</span>  	  <span class="c1">//undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sayAge</span><span class="p">)</span>  <span class="c1">//undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="c1">//张三
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayHello</span><span class="p">)</span> <span class="c1">//function(..)                
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span><span class="nx">sayHello</span><span class="p">,</span><span class="nx">test</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果有重名，setup优先。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{{</span><span class="nx">a</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">编译a的值</span><span class="err">，</span><span class="nx">显示为</span><span class="err">：</span><span class="mi">200</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//-----------Vue2语法------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">100</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//-----------Vue3语法------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">200</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span> <span class="nx">a</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>setup不能是一个async函数（不可写做<code>async setup(){}</code>）。</p>
<p>凡是<code>async</code>修饰的函数，返回值不再是return的对象，而是promise包裹了一层的对象，会导致Vue模板看不到return对象中的属性。</p>
<p>在写function为同异步调用的时候特别注意！！这里不能使用！！会导致模版编译不可用！！</p>
</li>
</ol>
</li>
</ol>
<h3 id="2ref函数">2.ref函数</h3>
<ul>
<li>作用：定义一个响应式的数据</li>
<li>接收的数据可以是：基本类型、也可以是对象类型。</li>
<li>基本类型的数据：响应式依然是靠 0bject.defineProperty()的 get 与 set 完成的。</li>
<li>对象类型的数据：响应式内部“求助”了Vue3.0中的一个新函数-reactive函数【后面阐述】</li>
</ul>
<p>Vue2中ref是一个标签属性，写做<code>&lt;input ref=&quot;qwq' ...&gt;</code>，用于标识组件或者标签。</p>
<p>Vue3中ref也可以作为标签属性，但他还有一个用法，就是作为ref函数：</p>
<p><strong>看一个现象：</strong></p>
<p>正常声明数据变量，并在方法中修改，变量被修改成功，但页面并不渲染。</p>
<img src="./images/image-20241118115238919.png" alt="image-20241118115238919" style="zoom:67%;" />
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">一个人的信息</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="o">:</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="o">:</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeInfo&#34;</span><span class="p">&gt;</span><span class="na">修改人的信息</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;张三&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">function</span> <span class="nx">changeInfo</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span> <span class="o">=</span><span class="s1">&#39;李四&#39;</span>
</span></span><span class="line"><span class="cl">       		<span class="nx">age</span> <span class="o">=</span> <span class="mi">48</span>
</span></span><span class="line"><span class="cl">        	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">changeInfo</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ref函数-基本类型数据申明">ref函数-基本类型数据申明</h4>
<p>我们用ref函数包裹申明，并且打印申明的数据：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">....</span>
</span></span><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;张三&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    	<span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">function</span> <span class="nx">changeInfo</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">....</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="./images/image-20241118141200499.png" alt="image-20241118141200499" style="zoom:67%;" />
<p>根据打印结果，很明显的，所有的数据都申明成了一个<code>RefImpl</code>对象。</p>
<p>数据内容都是对<code>RefImpl</code>的实例化。</p>
<p>我们拆分<code>RefImpl</code>单词，分别为<code>reference</code>引用，<code> implement</code>实现。所以对其申明的对象（<code>{}</code>中的内容），我们称之为：<strong>引用实现对象。</strong></p>
<p>全称：引用实现的实例对象。</p>
<p>也简称：引用对象。</p>
<p>对于基本数据类型，如果在Vue3中想要实现响应式，则需要将数据丢给ref函数进行处理，形成引用对象。</p>
<p>在Vue3中，基本数据类型通过ref实现响应式，和Vue2中一样，也是通过<code>0bject.defineProperty()</code>实现getter、setter的方式。</p>
<p>且getter、setter其不在实例对象本体<code>RefImpl</code>上，而在原型对象<code>__proto__</code>上。找不到默认往原型上找，可以成功找到。使用数据的时候，可以通过<code>.value</code>的方式进行访问，修改时，也可以通过setter进行页面的重新渲染，且保证了实例对象的属性精简。</p>
<img src="./images/image-20241118142502199.png" alt="image-20241118142502199" style="zoom:67%;" />
<p>上述例子，修改数据的完整写法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">一个人的信息</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="o">:</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="o">:</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeInfo&#34;</span><span class="p">&gt;</span><span class="na">修改人的信息</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;张三&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">function</span> <span class="nx">changeInfo</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">name</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span><span class="s1">&#39;李四&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="nx">age</span><span class="p">.</span><span class="nx">value</span>  <span class="o">=</span> <span class="mi">48</span>
</span></span><span class="line"><span class="cl">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">changeInfo</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>这里注意：<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>只有在setup访问中，遵循ES6语法时，访问数据才使用<code>.value</code>的形式。</p>
<p>在模版解析的时候：不能写成<code>name.value</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">模版中</span><span class="err">，</span><span class="nx">正常使用插值语法</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="o">:</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="o">:</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在Vue3中，解析模版时，当其发现引用数据为<code>RefImpl</code>的实例对象，则会自动帮我们访问数据对象的<code>.value</code>属性。</p>
<p>如果再手动加<code>.value</code>，就会识别成<code>name.value.value</code>导致也能渲染失败</p>
</div>
        </div>
    </div>
<h4 id="ref函数-对象类型数据申明">ref函数-对象类型数据申明</h4>
<p>注意申明结构：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">   <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;张三&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nx">age</span> <span class="o">:</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>打印<code>person.value</code>结果</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118145402896.png"
        data-srcset="./images/image-20241118145402896.png, ./images/image-20241118145402896.png 1.5x, ./images/image-20241118145402896.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118145402896.png"
        title="image-20241118145402896" /></p>
<p>这里能看到，对象类型的数据实现响应式，不再同Vue2一样。而是使用的<code>Proxy</code>对象。【后面会详细阐述】</p>
<p>访问每个属性则使用：<code>person.value.type</code></p>
<p>修改对象类型数据的完整写法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">一个人的信息</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">姓名</span><span class="o">:</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">type</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="o">:</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">salary</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeInfo&#34;</span><span class="p">&gt;</span><span class="na">修改人的信息</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">type</span> <span class="o">:</span> <span class="s1">&#39;前端工程师&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">salary</span> <span class="o">:</span> <span class="mi">30</span><span class="nx">k</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">function</span> <span class="nx">changeInfo</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">               <span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;UI设计师&#39;</span>
</span></span><span class="line"><span class="cl">               <span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">salary</span> <span class="o">=</span> <span class="s1">&#39;40k&#39;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">person</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">changeInfo</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3reactive函数">3.reactive函数</h3>
<ul>
<li>作用：定义一个<strong>对象类型</strong>的响应式数据</li>
</ul>
<p>与ref基本和对象类型的都可以申明不同，reactive只能申明对象类型的。用reactive申明基本数据类型<code>let number = reactive(666)</code>，控制台报错：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241118160354779.png"
        data-srcset="./images/image-20241118160354779.png, ./images/image-20241118160354779.png 1.5x, ./images/image-20241118160354779.png 2x"
        data-sizes="auto"
        alt="./images/image-20241118160354779.png"
        title="image-20241118160354779" /></p>
<p>申明对象类型的，则控制台打印：</p>
<img src="./images/image-20241118160753487.png" alt="image-20241118160753487" style="zoom:67%;" />
<ul>
<li>
<p>语法：<code>const 代理对象 = reactive(源对象) </code></p>
<p>接收一个对象(或数组)，返回一个<strong>代理对象(proxy的实例对象，简称proxy对象)</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//申明对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">job</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">d</span><span class="o">:</span><span class="mi">111</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">a</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">b</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">c</span><span class="o">:</span> <span class="mi">666</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>reactive定义的响应式数据是“深层次的”。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//修改对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">job</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">999</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//申明数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">hobby</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span><span class="s1">&#39;111&#39;</span><span class="p">,</span><span class="s1">&#39;222&#39;</span><span class="p">,</span><span class="s1">&#39;333&#39;</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//修改数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">hobby</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;000&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>内部基于 ES6 的 Proxy 实现，通过 <u>代理对象</u> 操作 <u>源对象</u>  内部数据进行操作。</p>
</li>
</ul>
<p>​</p>
<h3 id="4vue30中的响应式原理">4.Vue3.0中的响应式原理</h3>
<h4 id="vue2x的响应式">vue2.x的响应式</h4>
<ul>
<li>
<p>实现原理:</p>
<ul>
<li>
<p>对象类型:通过 Object.defineProperty()对对象的的读取、修改进行拦截(数据劫持)。</p>
</li>
<li>
<p>数组类型:通过重写更新数组的一系列方法来实现拦截。(对数组的变更方法进行了包裹)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="s1">&#39;count&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">(){}</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">    <span class="nx">set</span><span class="p">(){}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>存在问题：</p>
<ul>
<li>
<p>新增属性、删除属性，界面不会更新。（原因是：defineProperty只检测查改，检测不到增删。检测查改利用的get和set，没有检测增删的手段和方法）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--</span><span class="nx">person身上追加一个性别属性</span><span class="err">，</span><span class="nx">删除原有的name属性</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">&lt;</span><span class="nt">h1</span> <span class="nt">v-show</span><span class="o">=</span><span class="s">&#34;person.name&#34;</span><span class="p">&gt;</span><span class="na">姓名</span><span class="err">：</span><span class="p">{{</span><span class="na">person.name</span><span class="p">}}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">年龄</span><span class="err">：</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="nt">v-show</span><span class="o">=</span><span class="s">&#34;person.sex&#34;</span><span class="p">&gt;</span><span class="na">性别</span><span class="err">：</span><span class="p">{{</span><span class="na">person.sex</span><span class="p">}}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">person</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;张三&#39;</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">addSex</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">.</span><span class="nx">sex</span> <span class="o">=</span> <span class="s1">&#39;女&#39;</span>  <span class="c1">//person中数据改了，但是页面不更新
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">//解决办法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">,</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//或者 import Vue from &#39;vue&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">Vue</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">,</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">deleteName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="c1">//person中数据改了，但是页面不更新
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">//解决办法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$delete</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//或者 import Vue from &#39;vue&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">Vue</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>直接通过下标修改数组,界面不会自动更新。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">爱好</span><span class="err">：</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">hobby</span><span class="p">}}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">person</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">hobby</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;学习&#39;</span><span class="p">,</span><span class="s1">&#39;吃饭&#39;</span><span class="p">,</span><span class="s1">&#39;睡觉&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">updateHobby</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">.</span><span class="nx">hobby</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;逛街&#39;</span> <span class="c1">//person中数据改了，但是页面不更新
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">//解决办法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">.</span><span class="nx">hobby</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;逛街&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//或者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">person</span><span class="p">.</span><span class="nx">hobby</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;逛街&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​</p>
</li>
</ul>
</li>
</ul>
<h4 id="vue30的响应式">vue3.0的响应式</h4>
<h5 id="vue2x的响应式模拟">vue2.x的响应式模拟</h5>
<ol>
<li>新建一个<code>.html</code>文件，我们在其中模拟vue2.x实现响应式原理的关键代码</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//源数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;张三&#39;</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">            <span class="nx">age</span><span class="o">:</span><span class="mi">18</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//模拟Vue2中实现响应式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{}</span>   <span class="c1">//新建一个代理对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,{</span>    <span class="c1">//(操作对象,&#39;对象中要操作的属性&#39;,{get\set方法})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">configurable</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="c1">//允许删除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">get</span><span class="p">(){</span> <span class="c1">//有人读取person中的name时调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">return</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>  <span class="c1">//有人修改person中name时调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;有人修改了name属性，我发现了，我要去更新界面！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//age同理----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">,{</span>   
</span></span><span class="line"><span class="cl">            <span class="nx">get</span><span class="p">(){</span> <span class="c1">//有人读取person中的age时调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">return</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>  <span class="c1">//有人修改person中age时调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;有人修改了age属性，我发现了，我要去更新界面！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//....
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//有多少个属性就要写多少个Object.defineProperty()----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>测试一下响应式的效果</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241121112945129.png"
        data-srcset="./images/image-20241121112945129.png, ./images/image-20241121112945129.png 1.5x, ./images/image-20241121112945129.png 2x"
        data-sizes="auto"
        alt="./images/image-20241121112945129.png"
        title="image-20241121112945129" /></p>
<p>​</p>
<h5 id="vue30的响应式模拟">vue3.0的响应式模拟</h5>
<ul>
<li>
<p>想研究Vue3中的响应式，需要认识window上的<code>window.Proxy</code>这个函数。</p>
<p>他是window身上的一个<strong>内置的</strong>构造函数（不用下载安装，不用引入，直接就可以通过window使用）</p>
</li>
<li>
<p>这个<code>Proxy</code>我们在之前配置脚手架的代理的时候也用过，当时用作解决ajax跨域的问题。其实，不管在哪里，他都是<strong>代理</strong>的意思。</p>
</li>
<li>
<p>他的作用，就是使用p去映射对person的操作。和defineProperty弄出来一个p去匹配get、set；一操作p，就使person发生变化，并且能检测到，是一个道理。</p>
</li>
</ul>
<p><strong>下面是他的使用语法</strong>：</p>
<ol>
<li>同样是新建一个<code>.html</code>文件，我们在其中模拟vue3.0实现响应式原理的关键代码</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!--只是模拟关键代码，阐述原理，vue3底层并不是真正的这样去直接操作源数据--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//源数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;张三&#39;</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">            <span class="nx">age</span><span class="o">:</span><span class="mi">18</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//模拟Vue3中实现响应式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//(要代理的对象，{代理使用的CRUD方法})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   		<span class="c1">//const p = new Proxy(person,{})   //{}里可以空着，但是{}必须写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Proxy</span><span class="p">(</span><span class="nx">person</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">propName</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;有人读取了p身上的${propName}属性，我发现了，我要去更新界面！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nx">target</span><span class="p">[</span><span class="nx">propName</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;有人修改了p身上的${propName}属性，我发现了，我要去更新界面！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">target</span><span class="p">[</span><span class="nx">propName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 拦截删除属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">deleteProperty</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">propName</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;有人删除了p身上的${propName}属性，我发现了，我要去更新界面！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">delete</span> <span class="nx">target</span><span class="p">[</span><span class="nx">propName</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//不管多少个属性，写一个Proxy就可以了----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>测试一下响应式的效果</p>
<img src="./images/image-20241121154535906.png" alt="image-20241121154535906"  />
<h5 id="vue30的响应式真实原理">vue3.0的响应式真实原理</h5>
<div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>Vue3中响应式的实现原理<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JS" data-lang="JS"><span class="line"><span class="cl"><span class="k">new</span> <span class="nb">Proxy</span><span class="p">(</span><span class="nx">data</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 拦截读取属性值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">propName</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">Reflect</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">propName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 拦截设置属性值或添加新属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">Reflect</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">propName</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 拦截删除属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">deleteProperty</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">propName</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    	<span class="k">return</span> <span class="nx">Reflect</span><span class="p">.</span><span class="nx">deleteProperty</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">propName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>实现原理:</p>
<ul>
<li>
<p>通过Proxy(代理)：拦截对象中任意属性的变化，包括:属性值的读写、属性的添加、属性的删除等。</p>
</li>
<li>
<p>通过Reflect(反射)：对被代理对象的属性进行操作。</p>
</li>
<li>
<p>MDN文档中描述的Proxy与Reflect：</p>
<ul>
<li>Proxy: <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreffer ">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></li>
<li>Reflect: <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener noreffer ">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
    </div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="o">:</span><span class="mi">2</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>读取一个对象<code>obj</code>身上的属性：</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span>     <span class="c1">//1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式二 
</span></span></span><span class="line"><span class="cl"><span class="c1">//window.Reflect 反射
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Reflect</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>  <span class="c1">//1
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<p><strong><img src="./images/image-20241122093956285.png" alt="image-20241122093956285" style="zoom:67%;" /></strong></p>
<ul>
<li><strong>修改一个对象<code>obj</code>身上的属性：</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">100</span>   <span class="c1">//a=100
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Reflect</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="mi">666</span><span class="p">)</span>  <span class="c1">//a=666
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<img src="./images/image-20241122093857669.png" alt="image-20241122093857669" style="zoom:67%;" />
<ul>
<li><strong>删除一个对象<code>obj</code>身上的属性：</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">Reflect</span><span class="p">.</span><span class="nx">deleteProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="c1">//true
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<p><strong><img src="./images/image-20241122094224365.png" alt="image-20241122094224365" style="zoom:67%;" /></strong></p>
<p>对象Object身上常用的API在Reflect上基本也有，所以<code>Object.defineProperty()</code>对应的<code>Reflect.defineProperty()</code>也是有的。</p>
<p>与<code>Object.defineProperty()</code>不同的是，<code>Reflect.defineProperty()</code>代码编译运行更加健壮，即使存在重复代码，也就能够继续往下执行。而Object却要使用<code>try..catch</code>抛出错误，才能使后方代码继续执行。</p>
<p>所以在Vue3中采用的是<code>Reflect.defineProperty()</code>。</p>
<p>​</p>
<h3 id="5reactive对比ref">5.reactive对比ref</h3>
<ul>
<li>从定义数据角度对比：
<ul>
<li>ref用来定义：<strong>基本类型数据</strong>。</li>
<li>reactive用来定义：<strong>对象(或数组)类型数据</strong></li>
<li>备注：ref也可以用来定义<strong>对象(或数组)类型数据</strong>，它内部会自动通过 <code>reactive</code> 转为代理对象。</li>
</ul>
</li>
<li>从原理角度对比：
<ul>
<li>ref通过 <code>Object.defineProperty()</code>的<code>get</code> 与 <code>set </code>来实现响应式**(数据劫持)**。</li>
<li>reactive通过使用<strong>Proxy</strong>来实现响应式(数据劫持),并通过<code>Reflect</code>操作<strong>源对象</strong>内部的数据。</li>
</ul>
</li>
<li>从使用角度对比：
<ul>
<li>ref定义的数据：操作数据<strong>需要</strong><code>.value</code>，读取数据时模板中直接读取<strong>不需要</strong><code>.value</code>。</li>
<li>reactive定义的数据：操作数据与读取数据：<strong>均不需要</strong><code>.value</code>。</li>
</ul>
</li>
</ul>
<p>​</p>
<h3 id="6setup的两个注意点">6.setup的两个注意点</h3>
<ul>
<li>setup执行的时机
<ul>
<li>在beforeCreate之前执行一次，this是undefined。</li>
</ul>
</li>
<li>setup的参数
<ul>
<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>
<li>context：上下文对象
<ul>
<li>attrs：值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性，相当于<code>this.$attrs</code></li>
<li>slots: 收到的插槽内容，相当于<code>this.$slots</code></li>
<li>emit: 分发自定义事件的函数，相当于<code>this.$emit </code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Vue2中父子组件传值方式<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>props接受传参</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Demo</span> <span class="na">msg</span><span class="o">=</span><span class="s">&#39;111&#39;</span> <span class="na">school</span><span class="o">=</span><span class="s">&#39;222&#39;</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">父组件中传值</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;...,</span><span class="nx">props</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;msg&#39;</span><span class="p">,</span><span class="s1">&#39;school&#39;</span><span class="p">]</span> <span class="c1">//子组件中接受 &lt;/script&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span><span class="nx">msg</span><span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">子组件中使用</span><span class="o">--&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span><span class="nx">school</span><span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">子组件中使用</span><span class="o">--&gt;</span>   
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>$attrs存储传参</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Demo</span> <span class="na">msg</span><span class="o">=</span><span class="s">&#39;111&#39;</span> <span class="na">school</span><span class="o">=</span><span class="s">&#39;222&#39;</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">父组件中传值</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;...,</span><span class="nx">props</span><span class="o">:</span><span class="p">[]</span> <span class="c1">//子组件中不接受 &lt;/script&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span><span class="nx">$attrs</span><span class="p">.</span><span class="nx">msg</span><span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">子组件中使用</span><span class="o">--&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span><span class="nx">$attrs</span><span class="p">.</span><span class="nx">school</span><span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">子组件中使用</span><span class="o">--&gt;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>这里注意一个现象：</li>
</ul>
<img src="./images/image-20241127094314747.png" alt="image-20241127094314747" style="zoom:67%;" />
<ul>
<li>同样的，$slots中也能够存储插槽的虚拟节点信息。如：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Demo</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="mi">1111</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="mi">2222</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">Demo</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">父组件中传值</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;demo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">我是Demo组件</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">子组件中不管使不使用</span><span class="err">，</span><span class="nx">$slots中均有内容</span><span class="o">--&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="./images/image-20241127094945521.png" alt="image-20241127094945521" style="zoom:67%;" />
</div>
        </div>
    </div>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>Vue3中父子组件传值方式<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li><strong>setup在beforeCreate之前执行，且setup内的this是undefined。</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">beforeCreate</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---beforeCreate---&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<img src="./images/image-20241127100315059.png" alt="image-20241127100315059" style="zoom:67%;" />
<ul>
<li><strong>setup中的props参数接受传参</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Demo</span> <span class="na">msg</span><span class="o">=</span><span class="s">&#39;111&#39;</span> <span class="na">school</span><span class="o">=</span><span class="s">&#39;222&#39;</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="nx">父组件中传值</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">子组件中接收</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">props</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<p>​	<img src="./images/image-20241127101655657.png" alt="image-20241127101655657" style="zoom:67%;" /></p>
<p><strong>说明Vue3中不能只申明不接收就在setup中使用！</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">子组件中接收</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">props</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;msg&#39;</span><span class="p">,</span><span class="s1">&#39;school&#39;</span><span class="p">],</span><span class="c1">//*******所有传入参数，必须全部申明*********
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">props</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>setup中的context参数</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">子组件中接收</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(</span><span class="nx">context</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>控制台效果：</p>
<img src="./images/image-20241127102543580.png" alt="image-20241127102543580" style="zoom:67%;" />
<p>这个里面配置项的效果，与Vue2中对应的配置项，的效果一致。</p>
<p>注意！emits要用的时候，必须都先申明：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="nx">子组件中接收</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">props</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;msg&#39;</span><span class="p">,</span><span class="s1">&#39;school&#39;</span><span class="p">],</span><span class="c1">//*******申明props*********
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">emits</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">],</span><span class="c1">//*******申明emits*********
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span><span class="nx">context</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">context</span><span class="p">.</span><span class="nx">attrs</span><span class="p">)</span><span class="c1">//相当于Vue2中的$attrs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">context</span><span class="p">.</span><span class="nx">emit</span><span class="p">)</span><span class="c1">//触发自定义事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;---setup---&#39;</span><span class="p">,</span><span class="nx">context</span><span class="p">.</span><span class="nx">slots</span><span class="p">)</span><span class="c1">//插槽
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：Vue3中有API兼容的问题，推荐使用插槽的时候使用<code>v-slot:名字</code>的方式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">父组件中传值</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span> <span class="na">v</span><span class="nt">-slot</span><span class="o">:</span><span class="na">qwe</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="mi">11111</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h3 id="7计算属性与监视">7.计算属性与监视</h3>
<h4 id="1computed函数">1.computed函数</h4>
<ul>
<li>与Vue2.x中computed配置功能一致</li>
<li>写法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">computed</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//计算属性一简写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//计算属性-完整
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">get</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    	<span class="k">return</span> <span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span> <span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">nameArr</span> <span class="o">=</span><span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span><span class="nx">nameArr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nx">person</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span><span class="nx">nameArr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2watch函数">2.watch函数</h4>
<ul>
<li>
<p>与Vue2.x中watch配置功能一致</p>
</li>
<li>
<p>两个小&quot;坑&quot;：</p>
<ul>
<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视(deep配置失效)。</li>
<li>监视reactive定义的响应式数据中某个属性时：deep配置有效。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//情况一:监视ref定义的响应式数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">watch</span><span class="p">(</span><span class="nx">sum</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sum变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},{</span><span class="nx">immediate</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//情况二:监视多个ref定义的响应式数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">watch</span><span class="p">([</span><span class="nx">sum</span><span class="p">,</span><span class="nx">msg</span><span class="p">],(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sum或msg变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*情况三:监视reactive定义的响应式数据
</span></span></span><span class="line"><span class="cl"><span class="cm">	若watch监视的是reactive定义的响应式数据，则无法正确获得oldvalue!!
</span></span></span><span class="line"><span class="cl"><span class="cm">	若watch监视的是reactive定义的响应式数据，则强制开启了深度监视
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">watch</span><span class="p">(</span><span class="nx">person</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},{</span><span class="nx">immediate</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">deep</span><span class="o">:</span><span class="kc">false</span><span class="p">})</span><span class="c1">//此处的deep配置不再奏效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//情况四:监视reactive定义的响应式数据中的某个属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">watch</span><span class="p">(()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">job</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person的job变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},{</span><span class="nx">immediate</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//情况五:监视reactive所定义的一个响应式数据中的某些属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">watch</span><span class="p">([()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">,()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">age</span><span class="p">],(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person的name或age变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//特殊情况
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">watch</span><span class="p">(()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">job</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person的job变化了&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},{</span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span><span class="c1">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="3watcheffect函数">3.watchEffect函数</h4>
<ul>
<li>
<p>watch的套路是：既要指明监视的属性，也要指明监视的回调。</p>
</li>
<li>
<p>watchEfect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>
</li>
<li>
<p>watchEffect有点像computed：</p>
<ul>
<li>
<p>但computed注重的计算出来的值(回调函数的返回值)，所以必须要写返回值</p>
</li>
<li>
<p>而watchEffect更注重的是过程(回调函数的函数体)，所以不用写返回值。</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">watchEffect</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">x1</span><span class="o">=</span> <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">x2</span><span class="o">=</span><span class="nx">person</span><span class="p">.</span><span class="nx">age</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;watchEffect配置的回调执行了&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="8生命周期">8.生命周期</h3>
<p>待完善</p>
<h3 id="9自定义hook函数">9.自定义hook函数</h3>
<ul>
<li>
<p>什么是hook?——本质是一个函数，把setup函数中使用的Composition API进行了封装。</p>
</li>
<li>
<p>类似于vue2.x中的mixin。</p>
</li>
<li>
<p>自定义hook的优势：复用代码，让setup中的逻辑更清楚易懂。</p>
</li>
</ul>
<h3 id="10torefs">10.toRefs</h3>
<ul>
<li>作用：创建一个 ref对象，其value值指向另一个对象中的某个属性值。</li>
<li>语法：<code>const name =toRef(person,'name')</code></li>
<li>应用：要将响应式对象中的某个属性单独提供给外部使用时。</li>
<li>扩展：<code>toRefs</code>与<code>toRef</code>功能一致，但可以批量创建多个ref 对象，语法：<code>toRefs(person)</code></li>
</ul>
<h2 id="三其它-composition-api">三、其它 Composition API</h2>
<h3 id="1shallowreactive-与-shallowref">1.shallowReactive 与 shallowRef</h3>
<ul>
<li>
<p>shallowReactive：只处理对象最外层属性的响应式(浅响应式)。</p>
</li>
<li>
<p>shallowRef：只处理基本数据类型的响应式，不进行对象的响应式处理。</p>
</li>
<li>
<p>什么时候使用?</p>
<ul>
<li>
<p>如果有一个对象数据，结构比较深，但变化时只是外层属性变化 ===&gt;  shallowReactive。</p>
</li>
<li>
<p>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===&gt; shallowRef。</p>
</li>
</ul>
</li>
</ul>
<h3 id="2readonly-与-shallowreadonly">2.readonly 与 shallowReadonly</h3>
<ul>
<li>readonly：让一个响应式数据变为只读的(深只读)。</li>
<li>shallowReadonly：让一个响应式数据变为只读的(浅只读)。</li>
<li>应用场景：不希望数据被修改时。</li>
</ul>
<h3 id="3toraw-与-markraw">3.toRaw 与 markRaw</h3>
<ul>
<li>
<p>toRaw：</p>
<ul>
<li>
<p>作用：将一个由<code>reactive</code> 生成的<strong>响应式对象</strong>转为<strong>普通对象</strong>。</p>
</li>
<li>
<p>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</p>
</li>
</ul>
</li>
<li>
<p>markRaw：</p>
<ul>
<li>
<p>作用：标记一个对象，使其永远不会再成为响应式对象。</p>
</li>
<li>
<p>应用场景：</p>
<ol>
<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>
<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="4customref">4.customRef</h3>
<ul>
<li>
<p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>
</li>
<li>
<p>实现防抖效果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;keyword&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span><span class="nx">keyword</span><span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">customRef</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setup</span><span class="p">(){</span><span class="o">\</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//let keyword = ref(&#39;hello&#39;)  //使用Vue准备好的内置ref
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//自定义一个myRef
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">function</span> <span class="nx">myRef</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="nx">delay</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="kd">let</span> <span class="nx">timer</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//通过customRef去实现自定义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    			<span class="k">return</span> <span class="nx">customRef</span><span class="p">((</span><span class="nx">track</span><span class="p">,</span><span class="nx">trigger</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">get</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">track</span><span class="p">()</span><span class="c1">//告诉Vue这个value值是需要被“追踪”的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">return</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">                        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    					<span class="nx">set</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">trigger</span><span class="p">()</span><span class="c1">//告诉Vue去更新界面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="p">},</span><span class="nx">delay</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// let keyWord =ref(&#39;hello&#39;)   //使用Vue提供的ref
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">keyWord</span> <span class="o">=</span> <span class="nx">myRef</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span><span class="c1">//使用程序员自定义的ref
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="p">{</span><span class="nx">keyWord</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="5provide-与-inject">5.provide 与 inject</h3>
<ul>
<li>
<p>作用：实现<strong>祖孙组件间</strong>通信</p>
</li>
<li>
<p>套路：父组件有一个 <code>provide</code> 选项来提供数据，子组件有一个 <code>inject</code> 选项来开始使用这些数据</p>
</li>
<li>
<p>具体写法：</p>
<ol>
<li>
<p>祖组件中:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span><span class="nx">reactive</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;奔驰&#39;</span><span class="p">,</span><span class="nx">price</span><span class="o">:</span><span class="s1">&#39;40万&#39;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;car&#39;</span><span class="p">,</span><span class="nx">car</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>孙组件中:</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span><span class="nx">context</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl">	<span class="kr">const</span> <span class="nx">car</span><span class="o">=</span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;car&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="nx">car</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="6响应式数据的判断">6.响应式数据的判断</h3>
<ul>
<li>
<p>isRef：检查一个值是否为一个 ref 对象</p>
</li>
<li>
<p>isReactive：检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</p>
</li>
<li>
<p>isReadonly：检査一个对象是否是由 <code>readonly</code> 创建的只读代理</p>
</li>
<li>
<p>isProxy：检査一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</p>
</li>
</ul>
<h2 id="四composition-api-的优势">四、Composition API 的优势</h2>
<h3 id="1options-api-存在的问题">1.Options API 存在的问题</h3>
<p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241128154849021.png"
        data-srcset="./images/image-20241128154849021.png, ./images/image-20241128154849021.png 1.5x, ./images/image-20241128154849021.png 2x"
        data-sizes="auto"
        alt="./images/image-20241128154849021.png"
        title="image-20241128154849021" /></p>
<h3 id="2composition-apl-的优势">2.Composition APl 的优势</h3>
<p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./images/image-20241128154917514.png"
        data-srcset="./images/image-20241128154917514.png, ./images/image-20241128154917514.png 1.5x, ./images/image-20241128154917514.png 2x"
        data-sizes="auto"
        alt="./images/image-20241128154917514.png"
        title="image-20241128154917514" /></p>
<h2 id="五新的组件">五、新的组件</h2>
<h3 id="1fragment">1.Fragment</h3>
<ul>
<li>
<p>在Vue2中：组件必须有一个根标签</p>
</li>
<li>
<p>在Vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中</p>
</li>
<li>
<p>好处：减少标签层级，减小内存占用</p>
</li>
</ul>
<h3 id="2teleport">2.Teleport</h3>
<ul>
<li>
<p>什么是Teleport?</p>
<p>—— <code>Teleport</code> 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">teleport</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;移动位置&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&#34;isShow&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mask&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;dialog&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>我是一个弹窗<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;isShow = false&#34;</span><span class="p">&gt;</span>关闭弹窗<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">teleport</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3suspense">3.Suspense</h3>
<ul>
<li>
<p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li>
<p>使用步骤：</p>
<ul>
<li>异步引入组件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineAsyncComponent</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Child</span> <span class="o">=</span> <span class="nx">defineAsyncComponent</span><span class="p">(()=&gt;</span><span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./components/Child.vue&#39;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>使用 <code>Suspense</code>包裹组件，并配置好 <code>default</code> 与 <code>fallback</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>我是App组件<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">template</span> <span class="na">v-slot:default</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            	<span class="p">&lt;</span><span class="nt">Child</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">template</span> <span class="na">v-slot:fallback</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>加载中.....<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="六其他">六、其他</h2>
<h3 id="1全局api的转移">1.全局API的转移</h3>
<ul>
<li>Vue 2.x有许多全局 API和配置。
<ul>
<li>例如：注册全局组件、注册全局指令等</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//注册全局组件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;MyButton&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span><span class="p">()=&gt;({</span>
</span></span><span class="line"><span class="cl">		<span class="nx">count</span><span class="o">:</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">template</span><span class="o">:</span><span class="s1">&#39;&lt;button @click=&#34;count++&#34;&gt;Clicked {{ count }} times.&lt;/button&gt;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//注册全局指令
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl"><span class="nx">inserted</span><span class="o">:</span><span class="nx">el</span> <span class="p">=&gt;</span><span class="nx">el</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Vue3.0中对这些API做出了调整：
<ul>
<li>将全局的API，即:<code>Vue.xxx</code>调整到应用实例(<code>app</code>)上</li>
</ul>
</li>
</ul>
<img src="./images/image-20241128155949129.png" alt="image-20241128155949129" style="zoom:67%;" />
<h3 id="2其他改变">2.其他改变</h3>
<ul>
<li>
<p>data选项应始终被声明为一个函数。</p>
</li>
<li>
<p>过度类名的更改:</p>
<ul>
<li>
<p>Vue2.x写法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">enter</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-leave-to</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-leave</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-enter-to</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Vue3.x写法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-enter-from</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-leave-to</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-leave-from</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">v-enter-to</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><strong>移除</strong> keyCode作为 v-on 的修饰符，同时也不再支持 <code>config.keyCodes</code></p>
</li>
<li>
<p><strong>移除</strong> <code>v-on.native</code> 修饰符</p>
<ul>
<li>
<p>父组件中绑定事件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">my-component</span>
</span></span><span class="line"><span class="cl">   <span class="na">v</span><span class="nt">-on:close</span><span class="o">=</span><span class="s">&#34;handleComponentEvent&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="na">v</span><span class="nt">-on:click</span><span class="o">=</span><span class="s">&#34;handleNativeclickEvent&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>子组件中声明自定义事件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    	<span class="nx">emits</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><strong>移除</strong>过滤器(filter)</p>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是“只是 JavaScript&quot; 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2024-11-14</span>
            </div></div>

    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/vue/">Vue</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/text36/" class="prev" rel="prev" title="【bat批处理】提取多文件夹下的文件名称"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>【bat批处理】提取多文件夹下的文件名称</a>
            <a href="/text39/" class="next" rel="next" title="【Java】Java语言基础（一）">【Java】Java语言基础（一）<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript><div id="utterances" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container">
            <div class="footer-line">
                <span id="run-time"></span>
            </div><div class="footer-line">欢迎来到wangty的笔记博客空间</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2021 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">wangty</a></span></div>
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">
                  <i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span> 次
              </span> |
                        <span id="busuanzi_container_site_uv">
                  <i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span> 位
              </span>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":20},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"Wangty654.github.io"},"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.d7121d72cd85153ec9d35a888cee3eb28c2700ca763f649a538f6c772d750021.js" integrity="sha256-1xIdcs2FFT7J01qIjO4+sownAMp2P2SaU49sdy11ACE="></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script>
<script type="text/javascript" src="/js/custom.js"></script></body>
</html>
